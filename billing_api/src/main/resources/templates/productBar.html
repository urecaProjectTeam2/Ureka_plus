<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>메시지 발송 현황 | 관리자</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/productBar.css}">
    <link rel="stylesheet" th:href="@{/css/common.css}">
</head>

<body>
<div th:replace="layout/sidebar :: sidebar"></div>
<div class="container">
    <div class="chart-box">
    	<div class ="card">
        	<!-- 막대 그래프 -->	
			<div class="chart-wrapper bar-wrapper">
			    <h3>구독자 수 Top 7 상품</h3>
			    <canvas id="barChart"></canvas>
			</div>
		</div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script><script th:inline="javascript">

	const barLabels = [[${barLabels}]];
    const barData = [[${barData}]];

    new Chart(document.getElementById('barChart'), {
        type: 'bar',
        data: {
            labels: barLabels,
            datasets: [{
                label: '구독자 수',
                data: barData,
                backgroundColor: ['#c7d2fe', '#c7d2fe', '#c7d2fe', '#fcd34d', '#fda4af', '#a5f3fc', '#6ee7b7'],
                borderColor: '#f9fafb',      // 테두리 색 (선택)
                borderWidth: 1
            }]
        },
        options: {
            maintainAspectRatio: false,
            scales: {
                y: {
                    min: 40000,
                    max: 80000,
                    ticks: {
                        stepSize: 5000,
                        callback: value => value.toLocaleString()
                    }
                }
            },
            plugins: {
                tooltip: {
                    callbacks: {
                        label: ctx =>
                            `구독자 수: ${ctx.raw.toLocaleString()}`
                    }
                },
                legend: {
                    display: false
                }
            }
        }
    });
</script>



</body>
</html>
